<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ê–ù–ê–õ–Ü–¢–ò–ö–ê –†–û–ë–û–¢–ò –ú–û–ë–Ü–õ–¨–ù–ò–• –ì–†–£–ü</title>

  <!-- Leaflet core -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>

  <!-- MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

  <!-- Heatmap (Leaflet.heat) -->
  <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

  <!-- EasyPrint -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.easyPrint/2.1.9/leaflet.easyPrint.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- PapaParse for CSV -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- SheetJS for XLSX -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  
  <section id="hero-header" class="hero hero--brand">
    <div class="hero-inner">
      <img src="assets/img/emblem.png" alt="–ï–º–±–ª–µ–º–∞" class="hero-logo">
      <h1 class="hero-agency u-upper">–£–ü–†–ê–í–õ–Ü–ù–ù–Ø –ì–û–õ–û–í–ù–û–á –Ü–ù–°–ü–ï–ö–¶–Ü–á –ì–£–ù–ü –í –•–ê–†–ö–Ü–í–°–¨–ö–Ü–ô –û–ë–õ–ê–°–¢–Ü</h1>
      <h2 class="hero-project u-upper">–ê–ù–ê–õ–Ü–¢–ò–ö–ê –†–û–ë–û–¢–ò –ú–û–ë–Ü–õ–¨–ù–ò–• –ì–†–£–ü</h2>
    </div>
  </section>
    

  
  <header class="app-header">
    <div class="header-actions">
      <button id="btn-theme" title="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É">üåì</button>
      <button id="btn-mypos" title="–ú–æ—î –º—ñ—Å—Ü–µ">üìç –ú–æ—î –º—ñ—Å—Ü–µ</button>
      <button id="btn-print" title="–ï–∫—Å–ø–æ—Ä—Ç –∫–∞—Ä—Ç–∏ –≤ PDF/–¥—Ä—É–∫">üñ®Ô∏è –î—Ä—É–∫</button>
      <button id="btn-settings" title="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ–≤">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
    </div>
  </header>
    

  

  

  

  
  
  <main class="layout">
    <div class="layout-map">
      <div id="map"></div>
    </div>
    <aside class="layout-side">
      <section id="kpi-box" class="kpi-box"></section>
      <section class="chart-box">
        <canvas id="levelChart"></canvas>
      </section>
    </aside>
  </main>
    
    

<section class="controls">
    <div class="control-group">
      <label>–î–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö:</label>
      <button id="btn-load-demo">–î–µ–º–æ</button>
      <input type="file" id="file-input" accept=".csv,.json,.xlsx" />
      <input type="text" id="url-input" placeholder="–í—Å—Ç–∞–≤—Ç–µ URL –¥–æ CSV/JSON (Google Sheet: ...output=csv)" />
      <button id="btn-load-url">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ URL</button>
    </div>

    <div class="control-group">
      <label>–ü–µ—Ä—ñ–æ–¥:</label>
      <label><input type="radio" name="period" value="today" checked> –°—å–æ–≥–æ–¥–Ω—ñ</label>
      <label><input type="radio" name="period" value="m30"> 30 –¥–Ω—ñ–≤</label>
      <label><input type="radio" name="period" value="ytd"> –†—ñ–∫</label>

      <label class="ml">–†–µ–∂–∏–º –∫–∞—Ä—Ç–∏:</label>
      <label><input type="radio" name="mapmode" value="points" checked> –¢–æ—á–∫–∏</label>
      <label><input type="radio" name="mapmode" value="clusters"> –ö–ª–∞—Å—Ç–µ—Ä–∏</label>
      <label><input type="radio" name="mapmode" value="heat"> –¢–µ–ø–ª–æ–≤–∞</label>
    </div>

    <div class="control-group">
      <label>–†—ñ–≤–µ–Ω—å:</label>
      <select id="filter-level">
        <option value="">–í—Å—ñ</option>
        <option value="–ì–£–ù–ü">–ì–£–ù–ü</option>
        <option value="–•–†–£–ü">–•–†–£–ü</option>
        <option value="–í–ü">–í–ü</option>
        <option value="–í–Ω–ü">–í–Ω–ü</option>
      </select>

      <label class="ml">–ü—ñ–¥–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è:</label>
      <select id="filter-parent">
        <option value="">–í—Å—ñ</option>
      </select>

      <label class="ml">–ü–æ—à—É–∫:</label>
      <input type="search" id="search-name" placeholder="–ù–∞–∑–≤–∞ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É...">
    </div>

    <div class="control-group">
      <label>–ê–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è (—Ö–≤):</label>
      <input type="number" id="refresh-min" min="0" max="1440" step="1" value="0">
      <button id="btn-export-json">–ï–∫—Å–ø–æ—Ä—Ç JSON</button>
      <button id="btn-export-csv">–ï–∫—Å–ø–æ—Ä—Ç CSV</button>
    </div>
  </section>


  <!-- Settings Modal -->
  <dialog id="settings-dialog">
    <form method="dialog" class="settings-form">
      <header>
        <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ–≤</h2>
        <button id="settings-close" value="cancel">‚úñ</button>
      </header>
      <div class="settings-toolbar">
        <input type="search" id="settings-search" placeholder="–§—ñ–ª—å—Ç—Ä –∑–∞ –Ω–∞–∑–≤–æ—é...">
        <button type="button" id="settings-reset">–°–∫–∏–Ω—É—Ç–∏ –∑–º—ñ–Ω–∏</button>
        <button type="button" id="settings-apply">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
      </div>
      <div class="settings-table-wrap">
        <table id="settings-table" class="settings-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>–ù–∞–∑–≤–∞</th>
              <th>–†—ñ–≤–µ–Ω—å</th>
              <th>–ü—ñ–¥–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è</th>
              <th>Lat</th>
              <th>Lon</th>
              <th>–ö–æ–ª—ñ—Ä</th>
            </tr>
          </thead>
          <tbody id="settings-tbody">
          </tbody>
        </table>
      </div>
      <footer class="settings-footer">
        <small>–ó–º—ñ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ LocalStorage —Ü—å–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞.</small>
      </footer>
    </form>
  </dialog>

  <footer class="app-footer">
    <div>¬© 2025 ‚Ä¢ Frontend‚Äëonly –¥–µ–º–æ. –î–∞–Ω—ñ —É–º–æ–≤–Ω—ñ.</div>
  </footer>

  <!-- App scripts -->
<script src="assets/js/config.js"></script>
  <script src="assets/js/app.bundle.js"></script>
  <!-- Supabase SDK + config --><!-- App code (cache-busted) -->

</body>
</html>